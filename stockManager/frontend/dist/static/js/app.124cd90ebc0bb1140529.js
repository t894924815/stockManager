webpackJsonp([1],{"5R7S":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=o("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("h1",[this._v("股市有风险 入市需谨慎")]),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var a=o("VU/8")({name:"App"},r,!1,function(t){o("XhLe")},null,null).exports,n=o("/ocq"),s=o("BO1k"),u=o.n(s),i=o("fZjL"),c=o.n(i),f={name:"home",data:function(){return{stockList:[],overall:[],hideState:!0,hideStr:"显示",targetUrl:"http://127.0.0.1:8000"}},mounted:function(){this.showStocks()},methods:{showStocks:function(){var t=this,e=this.targetUrl;this.$axios.get(e+"/api/").then(function(e){var o=e.data;t.stockList=o.stocks,t.stockList.sort(function(t,e){return e.totalValue-t.totalValue}),t.overall.push(o.overall)})},stockCellStyle:function(t){var e=t.row,o=(t.column,t.rowIndex,t.columnIndex);return 3===o?this.cellStyle(e.offsetToday):7===o?this.cellStyle(e.offsetCurrent):8===o?this.cellStyle(e.offsetTotal):void 0},overallCellStyle:function(t){var e=t.row,o=(t.column,t.rowIndex,t.columnIndex);return 0===o?this.cellStyle(e.offsetToday):1===o?this.cellStyle(e.offsetCurrent):2===o?this.cellStyle(e.offsetTotal):void 0},cellStyle:function(t){return 0==t?"color: black;":t>0?"color: red;":"color: green;"},stockRowStyle:function(t){var e=t.row;t.rowIndex;if(e.totalValue<.1&&this.hideState)return{display:"none"}},resetHide:function(){this.hideState=!this.hideState,this.hideStr=this.hideState?"显示":"隐藏"},sortTotalValue:function(t,e){return parseFloat(t)<parseFloat(e)},goManager:function(){window.open("http://127.0.0.1:8000/admin/","_blank")},refreshDivident:function(){var t=this,e=[],o=this.stockList.filter(function(t,e){return t.totalValue>.1}),l=!0,r=!1,a=void 0;try{for(var n,s=u()(o);!(l=(n=s.next()).done);l=!0){var i=n.value,f={};f.code=i.code;var d=i.operationList.length,p=i.operationList[d-1].date.substr(0,4);f.first_year=p,e.push(f)}}catch(t){r=!0,a=t}finally{try{!l&&s.return&&s.return()}finally{if(r)throw a}}var _=this.targetUrl,v=this.$loading({fullscreen:!0});this.$axios.post(_+"/api/divident",e).then(function(e){if(v.close(),0==c()(e.data).length)t.$alert("刷新失败","请求错误",{confirmButtonText:"确定",callback:function(t){}});else{var o=e.data.number;t.$alert("更新了"+o+"条记录","请求成功",{confirmButtonText:"确定",callback:function(t){}})}})}}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("el-row",{attrs:{display:"margin-top:10px;margin-bottom: 20px"}},[o("el-button",{staticStyle:{"margin-right":"20px"},on:{click:t.goManager}},[t._v("后台管理")])],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"20px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.overall,border:"","cell-style":t.overallCellStyle}},[o("el-table-column",{attrs:{prop:"offsetToday",label:"当日盈亏"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetToday.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"offsetCurrent",label:"浮动盈亏"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetCurrent.toFixed(2)+" ("+e.row.offsetCurrentRatio+")"))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"offsetTotal",label:"累计盈亏"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetTotal.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"totalValue",label:"持股市值"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.totalValue.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"总资产"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s((e.row.totalCash+e.row.totalValue).toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"totalCash",label:"现金"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.totalCash.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"originCashStr",label:"本金"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.originCash.toFixed(2)))]}}])})],1)],1),t._v(" "),o("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"end"}},[o("el-button",{staticStyle:{"margin-right":"20px"},on:{click:t.resetHide}},[t._v(t._s(t.hideStr)+"市值为零的股票")]),t._v(" "),o("el-button",{staticStyle:{"margin-right":"20px"},on:{click:t.refreshDivident}},[t._v("更新除权除息记录")])],1),t._v(" "),o("el-row",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.stockList,border:"","cell-style":t.stockCellStyle,"row-style":t.stockRowStyle}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.operationList,border:"","cell-style":{"font-size":"10px",padding:"0px"},"row-style":{height:"40px"}}},[o("el-table-column",{attrs:{label:"交易日期",prop:"date"}}),t._v(" "),o("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("BUY"==e.row.type?"买入":"SELL"==e.row.type?"卖出":"除权除息"))]}}],null,!0)}),t._v(" "),o("el-table-column",{attrs:{label:"成交价",prop:"price"}}),t._v(" "),o("el-table-column",{attrs:{label:"数量",prop:"count"}}),t._v(" "),o("el-table-column",{attrs:{label:"佣金",prop:"fee"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.fee.toFixed(2)))]}}],null,!0)}),t._v(" "),o("el-table-column",{attrs:{label:"成交金额",prop:"sum"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.sum.toFixed(2)))]}}],null,!0)}),t._v(" "),o("el-table-column",{attrs:{label:"说明",prop:"comment"}})],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{staticStyle:{"text-decoration":"none",color:"black","font-weight":"bold"},attrs:{href:"https://xueqiu.com/S/"+e.row.code,target:"_blank"}},[t._v(t._s(e.row.name+" ("+e.row.code+")"))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"priceNow",label:"现价"}}),t._v(" "),o("el-table-column",{attrs:{prop:"offsetToday",label:"涨跌"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetToday.toFixed(3)+" ("+e.row.offsetTodayRatio+")"))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"totalValue",label:"持股市值",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.totalValue.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"holdCount",label:"持仓"}}),t._v(" "),o("el-table-column",{attrs:{prop:"overallCost",label:"摊薄成本/持仓成本"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.overallCost.toFixed(2)+" / "+e.row.holdCost.toFixed(2)))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"offsetCurrent",label:"浮动盈亏",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetCurrent.toFixed(2)+" ("+e.row.offsetCurrentRatio+")"))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"offsetTotal",label:"累计盈亏",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.offsetTotal.toFixed(2)))]}}])})],1)],1)],1)},staticRenderFns:[]};var p=o("VU/8")(f,d,!1,function(t){o("5R7S")},"data-v-7ab5e86c",null).exports;l.default.use(n.a);var _=new n.a({routes:[{path:"/",name:"Home",component:p}]}),v=o("mtWM"),b=o.n(v),h=(o("mw3O"),o("zL8q")),y=o.n(h);o("tvR6");l.default.prototype.$axios=b.a,l.default.use(y.a),l.default.config.productionTip=!1,new l.default({el:"#app",router:_,axios:b.a,components:{App:a},template:"<App/>"})},XhLe:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.124cd90ebc0bb1140529.js.map